##########################
#Mission Tree by Alienite#
##########################

ice_column_1 = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	
	potential = {
		OR = {
			tag = ICE
			was_tag = ICE
		}
		NOT = { map_setup = map_setup_random }
	}
	
	ice_gaelic_lords = {
		icon = mission_rb_conquer_the_isles
		position = 4
		required_missions = { ice_restoration_of_the_danelaw }
		
		provinces_to_highlight = {
			OR = {
				area = munster_area
				area = connacht_area
				area = leinster_area
				area = ulster_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			munster_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			connacht_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			leinster_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			ulster_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = "ice_high_king_of_ireland"
				duration = -1
			}
			add_accepted_culture = irish
		}
	}
	
}
ice_column_2 = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	
	potential = {
		OR = {
			tag = ICE
			was_tag = ICE
		}
		NOT = { map_setup = map_setup_random }
	}
	
	ice_king_of_scots = {
		icon = mission_rb_conquer_scotland
		position = 2
		required_missions = { ice_king_of_the_isles }
		
		provinces_to_highlight = {
			OR = {
				area = highlands_area
				area = lowlands_area
				area = strathclyde_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			highlands_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			lowlands_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			strathclyde_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			#add_prestige = 15
			add_country_modifier = {
				name = "ice_growing_legitimacy"
				duration = 9125
				#desc = ice_find_the_route_to_vinland_desc
			}
			give_claims = { area = scottish_marches_area }
			give_claims = { area = yorkshire_area }
			give_claims = { area = east_midlands_area }
			give_claims = { area = east_anglia_area }
		}
	}
	ice_restoration_of_the_danelaw = {
		icon = mission_danish_england
		position = 3
		required_missions = { ice_king_of_scots }
		
		provinces_to_highlight = {
			OR = {
				area = scottish_marches_area
				area = yorkshire_area
				area = east_midlands_area
				area = east_anglia_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			scottish_marches_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			yorkshire_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			east_midlands_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			east_anglia_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			#add_prestige = 15
			add_country_modifier = {
				name = "ice_northumbrian_shipyards"
				duration = -1
				#desc = ice_find_the_route_to_vinland_desc
			}
			give_claims = { region = british_isles_region }
		}
	}
	ice_lord_of_all_angleland = {
		icon = mission_invade_island
		position = 4
		required_missions = { ice_restoration_of_the_danelaw }
		
		provinces_to_highlight = {
			OR = {
				area = home_counties_area
				area = wessex_area
				area = west_midlands_area
				area = wales_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			home_counties_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			wessex_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			west_midlands_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			wales_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			#add_prestige = 15	
			remove_country_modifier = ice_northumbrian_shipyards
			#custom_tootltip = upgrade_northumbrian_shipyards_to_permanent.tt
			add_country_modifier = {
				name = "ice_total_naval_hegemony"
				duration = -1
			}
			give_claims = { area = normandy_area }
		}
	}
	
	ice_claims_on_the_lands_of_rollo = {
		icon = mission_control_the_channel
		position = 4
		required_missions = { ice_lord_of_all_angleland }
		
		provinces_to_highlight = {
			OR = {
				area = normandy_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			normandy_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			add_prestige = 15
			#Mission for emperor to lose IA and prestige
			give_claims = { area = ile_de_france_area }
		}
	}
}
ice_column_3 = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	
	potential = {
		OR = {
			tag = ICE
			was_tag = ICE
		}
		NOT = { map_setup = map_setup_random }
	}
	
	ice_king_of_the_isles = {
		icon = mission_longships
		position = 1
		required_missions = {  }
		
		
		provinces_to_highlight = {
			OR = {
				province_id = 253
				province_id = 4364
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			253 = {
				owned_by = ROOT
				is_core = ROOT
			}
			4364 = {
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			add_prestige = 15
			give_claims = { area = highlands_area }
			give_claims = { area = lowlands_area }
			give_claims = { area = strathclyde_area }
			give_claims = { area = northern_norway }
			give_claims = { area = western_norway }
			give_claims = { area = eastern_norway }
		}
	}
	
	ice_proclaim_the_north_sea_empire = {
		icon = mission_north_sea_empire
		position = 5
		required_missions = { ice_lord_of_all_angleland ice_cross_the_danish_strait }
		provinces_to_highlight = {
			OR = {
				region = scandinavia_region
				region = british_isles_region
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			stability = 3
			religious_unity = 0.90
			scandinavia_region = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			british_isles_region = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			#add_prestige = 15
			country_event = { 
				id = norse_events.9
				days = 0
			}
			country_event = { 
				id = norse_events.8
				days = 0
			}
			custom_tooltip = FL_blank.tt
			add_country_modifier = {
				name = "ice_north_sea_empire"
				duration = -1
				#desc = ice_find_the_route_to_vinland_desc
			}
		}
	}
}

ice_column_4 = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	
	potential = {
		OR = {
			tag = ICE
			was_tag = ICE
		}
		NOT = { map_setup = map_setup_random }
	}
	
	ice_king_of_norway = {
		icon = mission_crown_of_norway
		position = 2
		required_missions = { ice_king_of_the_isles }
		
		provinces_to_highlight = {
			OR = {
				area = northern_norway
				area = western_norway
				area = eastern_norway
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			NOT = {
				exists = NOR
			}
			northern_norway = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			western_norway = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			eastern_norway = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			#add_prestige = 15
			country_event = { 
				id = flavor_ice.2
				days = 0
			}
			custom_tooltip = FL_blank.tt
			give_claims = { area = svealand_area }
			give_claims = { area = ostra_svealand_area }
			give_claims = { area = gotaland_area }
			give_claims = { area = vastra_gotaland_area }
			give_claims = { area = norrland_area }
		}
	}
	
	ice_banner_of_svealand = {
		icon = mission_crown_of_sweden
		position = 3
		required_missions = { ice_king_of_norway }
		
		provinces_to_highlight = {
			OR = {
				area = svealand_area
				area = ostra_svealand_area
				area = vastra_gotaland_area
				area = gotaland_area
				area = norrland_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			NOT = {
				exists = SWE
			}
			svealand_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			ostra_svealand_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			norrland_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			#add_prestige = 15
			give_claims = { region = scandinavia_region }
		}
	}
	ice_cross_the_danish_strait = {
		icon = mission_crown_of_denmark
		position = 3
		required_missions = { ice_banner_of_svealand }
		
		provinces_to_highlight = {
			OR = {
				area = denmark_area
				area = skaneland_area
				area = jutland_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			NOT = {
				exists = DAN
			}
			denmark_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			skaneland_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			jutland_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			#add_prestige = 15
			add_permanent_power_projection = {
				type = ICELAND_perma_pp
				amount = 15
			}
			give_claims = { area = holstein_area }
			custom_tooltip = ice_gain_claims_on_major_hanseatic_cities
			hidden_effect = {
				44 = {
					add_permanent_claim = ROOT
				}
				45 = {
					add_permanent_claim = ROOT
				}
				43 = {
					add_permanent_claim = ROOT
				}
				41 = {
					add_permanent_claim = ROOT
				}
				38 = {
					add_permanent_claim = ROOT
				}
			}
		}
	}
	
	ice_reorganize_the_hansa = {
		icon = mission_hanseatic_city
		position = 3
		required_missions = { ice_cross_the_danish_strait }
		
		provinces_to_highlight = {
			OR = {
				province_id = 44
				province_id = 45
				province_id = 43
				province_id = 41
				province_id = 38
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			NOT = {
				exists = HSA
			}
			44 = {
				owned_by = ROOT
				is_core = ROOT
			}
			45 = {
				owned_by = ROOT
				is_core = ROOT
			}
			43 = {
				owned_by = ROOT
				is_core = ROOT
			}
			41 = {
				owned_by = ROOT
				is_core = ROOT
			}
			38 = {
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			#add_prestige = 15
			add_country_modifier = {
				name = "ice_full_control_of_baltic_trade"
				duration = -1
				#desc = ice_find_the_route_to_vinland_desc
			}
		}
	}
}

ice_column_5 = {
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	
	potential = {
		OR = {
			tag = ICE
			was_tag = ICE
		}
		NOT = { map_setup = map_setup_random }
	}
	
	ice_ivory_from_the_west = {
		icon = mission_fish_markets
		position = 1
		required_missions = {  }
		
		provinces_to_highlight = {
			
		}
		trigger = {
			has_country_flag = ice_new_contact_with_vinland
		}
		effect = {
			add_country_modifier = {
				name = "ice_find_the_route_to_vinland"
				duration = 3650
				#desc = ice_find_the_route_to_vinland_desc
			}
			#discover = denmark_strait_area
			#discover = sea_of_labrador_area
			#discover = gulf_of_st_lawrence_area
			#discover = greenland_area
			#discover = newfoundland_area
			#discover = lower_acadia_area
		}
	}
	
	ice_finish_the_finnish = {
		icon = mission_the_finns
		position = 4
		required_missions = { ice_banner_of_svealand }
		
		provinces_to_highlight = {
			OR = {
				area = finland_area
				area = bothnia_area
				area = laponia_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			finland_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			bothnia_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			laponia_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			#add_prestige = 15
			unlock_estate_privilege = {
				estate_privilege = estate_burghers_forest_expansion
			}
			
			pomor_area = {
				add_permanent_claim = ROOT
			}
			arkhangelsk_area = {
				add_permanent_claim = ROOT
			}
			north_karelia = {
				add_permanent_claim = ROOT
			}
			karelia_area = {
				add_permanent_claim = ROOT
			}
			novgorod_area = {
				add_permanent_claim = ROOT
			}
			estonia_ingria_area = {
				add_permanent_claim = ROOT
			}
			livonia_area = {
				add_permanent_claim = ROOT
			}
			curonia_area = {
				add_permanent_claim = ROOT
			}
			pskov_area = {
				add_permanent_claim = ROOT
			}
			beloozero_area = {
				add_permanent_claim = ROOT
			}
			set_country_flag = ice_finished_the_finnish
		}
	}
}